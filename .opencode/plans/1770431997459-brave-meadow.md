# Creative Studio - Project Selection Modal

## Summary
Add a project selection modal that appears when entering `/creative-studio` without a `projectId` URL parameter. Support passing `projectId` via URL to skip modal.

## User Flow
1. User navigates to `/creative-studio`
   - **Without projectId**: Show project selector modal
   - **With projectId** (e.g., `/creative-studio?projectId=xxx`): Skip modal, load directly
2. User selects a project or creates new one
3. URL updates with selected projectId (enables bookmarking/sharing)
4. CampaignGenerator loads with selected project

## Files to Create

### 1. `packages/web/src/components/creative-studio/project-selector-modal.tsx`
Main modal component:
- Props: `isOpen`, `onClose`, `onSelectProject`, `onCreateProject`
- Header with title + close button
- Search input for filtering
- 2-column grid of project cards
- Footer with Cancel/Confirm buttons
- Empty state when no projects exist

### 2. `packages/web/src/components/creative-studio/project-selector-item.tsx`
Individual selectable project card:
- Props: `project`, `isSelected`, `onSelect`
- Shows: thumbnail, title, status badge, date
- Visual selection state (ring highlight)

### 3. `packages/web/src/components/creative-studio/index.ts`
Export barrel file

## Files to Modify

### 1. `packages/web/src/routes/_authenticated/creative-studio.tsx`
- Add search param validation with Zod
- Define optional `projectId` string parameter

```typescript
import { z } from 'zod'

const searchSchema = z.object({
  projectId: z.string().optional(),
})

export const Route = createFileRoute('/_authenticated/creative-studio')({
  validateSearch: searchSchema,
  component: CreativeStudioPage,
})
```

### 2. `packages/web/src/pages/creative-studio-page.tsx`
- Read `projectId` from `Route.useSearch()`
- Add modal state management
- Conditionally render modal vs CampaignGenerator
- Handle navigation when project selected (update URL)
- Handle "Create Project" → navigate to `/projects`

### 3. `packages/web/src/components/campaign/campaign-generator.tsx`
- Add required `projectId` prop
- Remove auto-detection logic (lines 69-91)
- Simplify component initialization

## Component Structure

```
CreativeStudioPage
├── ProjectSelectorModal (when !projectId)
│   ├── Header (title + close)
│   ├── Search Input
│   ├── Project Grid
│   │   └── ProjectSelectorItem[]
│   ├── "Create New Project" button
│   └── Footer (Cancel / Confirm)
└── CampaignGenerator (when projectId set)
```

## Design Decisions

- **Create New Project**: Navigate to `/projects` page (reuses existing creation flow)
- **Close Modal Without Selection**: Navigate to `/dashboard` (safe fallback)

## Edge Cases

| Case | Handling |
|------|----------|
| No projects | Empty state with "Create First Project" CTA → navigates to `/projects` |
| Invalid projectId | Toast error, show modal |
| User closes modal | Navigate to `/dashboard` |
| API error | Error state with retry button |

## Implementation Order

1. Add Zod to route for search param validation
2. Create `project-selector-item.tsx` (presentational)
3. Create `project-selector-modal.tsx` (with project fetching)
4. Update `creative-studio-page.tsx` (orchestration)
5. Update `campaign-generator.tsx` (accept projectId prop)
6. Add error handling and edge cases

## Verification

1. **Manual Testing**:
   - Visit `/creative-studio` → modal appears
   - Visit `/creative-studio?projectId=xxx` → skips modal
   - Select project → URL updates, generator loads
   - Search filters projects
   - "Create Project" navigates to `/projects`

2. **Run existing tests**:
   ```bash
   cd packages/web && bun test
   ```
